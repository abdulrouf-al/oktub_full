<% layout('/layouts/boilerplate') %>
    <nav class="navbar padding navbar-expand-lg fw-bolder lead">
        <div class="container-fluid">

            <a href="/homePage" class="navbar-brand fw-bold mx-4 ">Oktub</a>

            <div class="d-flex align-items-baseline">

                <div id="profile-links-btn2" class="position-relative   d-block d-md-none ">
                    <% if(currentUser){ %>
                        <a href="#" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false"
                            class="outline-none dropdown-toggle dropdown-toggle-split text-decoration-none"><img
                                width="50" src="<%= currentUser.image %> " alt="sham sham"
                                class="rounded-circle outline-none"></a>

                        <div id="profile-links2" class="dropdown-menu position-absolute m-1 start-0 end-0"><a
                                href="/username=<%= currentUser.username  %> "
                                class="dropdown-item px-3 p-0 py-1 fw-bold ">My Blogs </a> <a href="/likes"
                                class="dropdown-item px-3 p-0 py-1 fw-bold ">Favorites</a> <a href="/settings"
                                class="dropdown-item px-3 p-0 py-1 fw-bold ">Settings</a>
                            <a href="/statistics" class="dropdown-item px-3 p-0 py-1 fw-bold ">Statistics</a>
                            <a href="/logout" class="dropdown-item px-3 p-0 py-1 fw-bold">
                                Logout
                            </a>
                            <div class="border-bottom flex-1 my-2"></div> <a t arget="_blank" href="/"
                                class="nav-link fw-bold px-3 p-0 py-1 text-secondary">
                                About Oktub
                            </a> <a target="" href="" class="nav-link  fw-bold px-3 p-0 py-1 text-secondary">
                                Writing Conditions
                            </a> <a target="" href="" class="nav-link fw-bold px-3 p-0 py-1 text-secondary">
                                privacy policy
                            </a>
                        </div>
                        <% } %>
                </div><a href="/create" class="btn btn-primary text-white  m-sm-0 px-4 d-block d-md-none  fw-bold">
                    new blog
                </a>
            </div>
            <button class="navbar-toggler " type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">


                <form class="d-flex justify-content-center align-items-center me-auto p-2 d-none d-md-flex"
                role="search" method="POST"  action="/search">
                <i role="button" id="search-btn"
                    class="fa fa-search text-secondary mx-1 fw-bold d-sm-none d-md-block pe-auto"></i>
                <input class="form-control pl-2 pr-2 pb-2  border-secondary focus d-none " id="search-input"
                    type="search" name="search" placeholder=" " aria-label="Search">
            </form>
                <a href="/blogs/create" class="btn btn-primary text-white mb-3 m-sm-0 px-4 d-none d-md-block fw-bold ">
                    new blog
                </a> <a href="/" class="btn bg-white  shadow-sm text-black px-4 mx-3   fw-blod  d-none d-md-block ">

                    explore
                </a>
            </div>
            <% if(currentUser){ %>
                <div id="profile-links-btn" class="position-relative d-none d-lg-block  d-sm-none d-md-block"><a
                        href="#" id="dropdown-menu-links" data-toggle="dropdown" aria-haspopup="true"
                        aria-expanded="false"
                        class="outline-none dropdown-toggle dropdown-toggle-split text-decoration-none"><img width="50"
                            src="<%= currentUser.image %> " alt="sham sham" class="rounded-circle outline-none"></a>
                    <div id="profile-links" class="dropdown-menu position-absolute m-1 end-0 "><a
                            href="/username=<%= currentUser.username %> "
                            class="dropdown-item px-3 p-0 py-1 fw-bold ">My Blogs</a> <a href="/likes"
                            class="dropdown-item px-3 p-0 py-1 fw-bold ">Favorites</a> <a href="/settings"
                            class="dropdown-item px-3 p-0 py-1 fw-bold ">Settings</a>
                        <a href="/statistics" class="dropdown-item px-3 p-0 py-1 fw-bold ">Statistics</a>
                        <a href="/logout" class="dropdown-item px-3 p-0 py-1 fw-bold">
                            Logout
                        </a>
                        <div class="border-bottom flex-1 my-2 "></div> <a target="" href=""
                            class="nav-link fw-bold px-3 p-0 py-1 text-secondary">
                            About Oktub
                        </a> <a target="" href="" class="nav-link fw-bold px-3 p-0 py-1 text-secondary">
                            Writing Conditions
                        </a> <a target="" href="" class="nav-link fw-bold px-3 p-0 py-1 text-secondary">
                            Privacy Policy
                        </a>
                    </div>
                </div>
                <script type="text/javascript" src="../../public/js/nav.js"></script>
                <% } %>

        </div>
    </nav>
    <section class="vh-100 ">
        <div class="container-fluid h-custom">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col-md-9 col-lg-6 col-xl-5">
                    <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp"
                        class="img-fluid" alt="Sample image">
                </div>
                <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
                    
                        <div class="d-flex flex-row align-items-center justify-content-center justify-content-lg-start">
                            <p class="lead fw-normal mb-0 me-3">Sign in with</p>
                            <button type="button" class="btn btn-primary rounded-circle text-white btn-floating mx-1">
                                <i class="fa fa-facebook"></i>
                            </button>

                            <button type="button" class="btn btn-primary btn-floating text-white rounded-circle mx-1">
                                <i class="fa fa-twitter"></i>
                            </button>

                            <button type="button" class="btn btn-primary rounded-circle text-white btn-floating mx-1">
                                <i class="fa fa-linkedin"></i>
                            </button>
                        </div>

                        <div class="divider d-flex align-items-center my-4">
                            <p class="text-center fw-bold mx-3 mb-0">Or</p>
                        </div>

                        <!-- Email input -->
                        <form action="/login" method="POST" class="validated-form">
                        <div class="form-outline mb-4">
                            <input type="text" name="username" class="form-control form-control-lg"
                                placeholder="username" required />
                        </div>

                        <!-- Password input -->
                        <div class="form-outline mb-3">
                            <input type="password" name="password" class="form-control form-control-lg"
                                placeholder="password" required />
                        </div>

                        <div class="d-flex justify-content-end align-items-center">
                            <!-- Checkbox -->
                            <!-- <div class="form-check mb-0">
                <input class="form-check-input me-2" type="checkbox" value="" id="form2Example3" />
                <label class="form-check-label tex" for="form2Example3">
                  Remember me
                </label>
              </div> -->
                            <a href="#!" class="text-body">Forgot password?</a>
                        </div>

                        <div class="text-center text-lg-start mt-4 pt-2">
                            <button type="submit" class="btn btn-primary btn-lg text-white px-4"
                                >Login</button>
                                
                            <p class="small fw-bold mt-2 pt-1 mb-0">Don't have an account? <a href="/signup"
                                    class="link-danger">Signup</a></p>
                        </div>

                    </form>
                </div>
            </div>
        </div>

    </section>



    <!-- <div class="container" >
  <div class="row">
      <div class="col-lg-10 mx-auto my-5">
<div class="mb-3 w-50">
  
<form action="/login" method="POST" class="validated-form" novalidate>
<h2> login  </h2>
<label for="username" class="form-label fw-bold">username </label>
<input  class="form-control mb-3" type="text" name="username" required />
<div class="password error"></div>
<div class="valid-feedback"></div>

<div class="valid-feedback"></div>
<label for="password" class="form-label fw-bold">password </label>
<input  class="form-control mb-3" type="password" name="password" required />
<div class="password error"></div>
<div class="valid-feedback"></div>

<button class="btn btn-secondary fw-bold mt-2">sign me in</button>
</form>
</div>
</div>
</div>
</div> -->

    <!-- <script>
  const form = document.querySelector('form');
  const emailError = document.querySelector('.email.error');
  const passwordError = document.querySelector('.password.error');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // reset errors
    emailError.textContent = '';
    passwordError.textContent = '';

    // get values
    const email = form.email.value;
    const password = form.password.value;

    try {
      const res = await fetch('/login', { 
        method: 'POST', 
        body: JSON.stringify({ email, password }),
        headers: {'Content-Type': 'application/json'}
      });
      const data = await res.json();
      console.log(data);
      if (data.errors) {
        emailError.textContent = data.errors.email;
        passwordError.textContent = data.errors.password;
      }
      if (data.user) {
        location.assign('/');
      }

    }
    catch (err) {
      console.log(err);
    }
  });
</script> -->