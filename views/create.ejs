<% layout('/layouts/boilerplate') %>


  <!-- 
  <div class="container lead">
    <div class="row">

      <div class="col-lg-10 mx-auto my-5">
        <div class="create-blog content">
          <form action="/blogs" method="POST">
            <button class="btn btn-primary text-white mt-5">post</button>
            <span class="closeArticleBtn ml-4 cursor-pointer">
              <img width="20" height="20" alt="close-img" src=""></span>
            <div class="w-100 mt-5 px-4 px-sm-0 position-relative">


              <label class="position-absolute cursor-pointer float-right pt-4 h2 left-25 top-0 image-upload">

                <input id="thumbnail-input" type="file" name="thumbnail" class="d-none">
                <i aria-hidden="true" class="thumbnail-icon fa fa-image text-dark "></i>
                <img alt="" src="" class="thumbnail-image max-w-h-28px d-none"></label>
            </div>
            <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

            <div id="body" name="body" style="width:auto ;min-height: 100px;">
            </div>
            <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
            <script>
              var quill = new Quill('#body', {
                theme: 'snow'
              });
            </script>
          </form>
        </div>

      </div>
    </div>
  </div>

 -->

  <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
  <script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
  <div id="form-container" class="container">
    <form action="/blogs" id="formId" method="POST">
      <div class="row">
        <!-- <button type="button" class="btn-close" aria-label="Close"></button> -->
        
        <div class="col-xs-8">
          <div class="form-group">
            <input id="title" type="text" autofocus name="title" required placeholder="title"
            class="articleTitleInput border-0 outline-none h1 w-100 article-title text-hover-black text-black font-weight-bold mb-4">
          </div>
          
        </div>
      </div>
      <div class="row form-group">
        <input name="body" type="hidden">
        <div id="editor-container" style="min-height: 200px;">
        </div>
      </div>
      <div class="row">
        <button class="btn btn-primary text-white" type="submit">Save Profile</button>
      </div>
    </form>
  </div>

     <!-- <script src="https://code.jquery.com/jquery-3.6.1.js"
  integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
  crossorigin="anonymous"></script>  -->

  <script>
    var quill = new Quill('#editor-container', {
      modules: {
        toolbar: [
        [{ header: [1, 2, 3, 4, 5, 6,  false] }],
        ['bold', 'italic', 'underline','strike'],
          ['link', 'blockquote', 'code-block', 'image'],
          [{ 'script': 'sub'}, { 'script': 'super' }],
          [{ list: 'ordered' }, { list: 'bullet' }]
          ['clean']
        ]
      },
      placeholder: 'body...',
      scrollingContainer: '#scrolling-container',
      theme: 'snow'
    });

/* 
    function logHtmlContent() {
      var name = document.querySelector('input[name=body]'); // set name input var
      name.value = quill.root.innerHTML;
    console.log(name.value);    }
 */
    









    

    var form = document.getElementById("formId"); // get form by ID
    form.onsubmit = function() { // onsubmit do this first
        var name = document.querySelector('input[name=body]'); // set name input var
        
        name.value = encodeURIComponent(JSON.stringify(quill.getContents())); // populate name input with quill data
        //name.value=quill.root.innerHTML;
        console.log(name.value)
        //console.log("Submitted", $(form).serialize(), $(form).serializeArray());
        return true; // submit form

    } 
    /* 


      var text = quill.getText();
      console.log("text is : ", text)
      about.innerText = text.split(/\s+/).length;
      about.value = JSON.stringify(quill.getContents());
      console.log("JSON.stringify", about.value)
      about.value = text;
      console.log("text", about.value) */
      //about.value = quill.root.innerHTM;
     // console.log("innerHTM" ,about.value)
      //console.log("innerText",about.innerText)
      //console.log("Submitted", $(form).serialize(), $(form).serializeArray());

      // No back end to actually submit to!
      //alert('please fill out the field')
      //return true;
    //};

  </script>